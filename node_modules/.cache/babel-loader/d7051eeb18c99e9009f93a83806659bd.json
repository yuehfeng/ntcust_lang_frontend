{"remainingRequest":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\www-server\\ntcust_lang_frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\www-server\\ntcust_lang_frontend\\src\\views\\components\\Manage-Banner-Create.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\www-server\\ntcust_lang_frontend\\src\\views\\components\\Manage-Banner-Create.vue","mtime":1647371331636},{"path":"C:\\www-server\\ntcust_lang_frontend\\babel.config.js","mtime":1647072923606},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645007183919},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1645007186797},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645007183919},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1645007187285}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgdXNlSW1hZ2VVcGxvYWQgfSBmcm9tICcuL3VzZUltYWdlVXBsb2FkJzsKaW1wb3J0IHsgcmVmIH0gZnJvbSAidnVlIjsgLy8gaW1wb3J0IHsgQmFubmVyU2VydmVyIH0gZnJvbSAiLi4vLi4vcHJvdmlkZXJzL2h0dHAtc2VydmVyLmpzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSG9tZSIsCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIG1lc3NhZ2UgPSByZWYoIiIpOwogICAgdmFyIGltYWdlcyA9IHJlZihbXSk7CiAgICB2YXIgZGVzY3JpcHRpb24gPSByZWYoIiIpOwogICAgdmFyIHRpdGxlID0gcmVmKCIiKTsKCiAgICB2YXIgX3VzZUltYWdlVXBsb2FkID0gdXNlSW1hZ2VVcGxvYWQoKSwKICAgICAgICBpbWFnZUZpbGUgPSBfdXNlSW1hZ2VVcGxvYWQuaW1hZ2VGaWxlLAogICAgICAgIGltYWdlVXJsID0gX3VzZUltYWdlVXBsb2FkLmltYWdlVXJsLAogICAgICAgIGhhbmRsZUltYWdlU2VsZWN0ZWQgPSBfdXNlSW1hZ2VVcGxvYWQuaGFuZGxlSW1hZ2VTZWxlY3RlZDsKCiAgICBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoKSB7CiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGVfaWQiLCBpbWFnZUZpbGUudmFsdWUpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoInRpdGxlIiwgdGl0bGUudmFsdWUpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImRlc2NyaXB0aW9uIiwgZGVzY3JpcHRpb24udmFsdWUpOwogICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICByZXF1ZXN0Lm9wZW4oIlBPU1QiLCAiaHR0cDovL2xvY2FsaG9zdC9udGN1c3RfbGFuZ19iYWNrZW5kL3B1YmxpYy9hcGkvYmFubmVyL2NyZWF0ZSIpOwogICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnQVBJX1RPS0VOJykpOwogICAgICByZXF1ZXN0LnNlbmQoZm9ybURhdGEpOwoKICAgICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHJlcXVlc3QucmVhZHlTdGF0ZSA9PT0gNCkgewogICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSAyMDAgJiYgcmVxdWVzdC5zdGF0dXNUZXh0ID09PSAnT0snKSB7CiAgICAgICAgICAgIC8vIOW7uueri+WclueJh+izh+aWmemPiOe1kAogICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oMCk7CiAgICAgICAgICB9IGVsc2Ugey8vIGNvbnNvbGUubG9nKCdmYWlsZWQnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICBpbWFnZVVybC52YWx1ZSA9ICIiOwogICAgICBpbWFnZUZpbGUudmFsdWUgPSAiIjsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBoYW5kbGVJbWFnZVNlbGVjdGVkOiBoYW5kbGVJbWFnZVNlbGVjdGVkLAogICAgICBpbWFnZVVybDogaW1hZ2VVcmwsCiAgICAgIGhhbmRsZVN1Ym1pdDogaGFuZGxlU3VibWl0LAogICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICBpbWFnZXM6IGltYWdlcywKICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLAogICAgICB0aXRsZTogdGl0bGUKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["C:\\www-server\\ntcust_lang_frontend\\src\\views\\components\\Manage-Banner-Create.vue"],"names":[],"mappings":"AAmEA,SAAS,cAAT,QAA+B,kBAA/B;AACA,SAAS,GAAT,QAAoB,KAApB,C,CACA;;AAEA,eAAe;AACX,EAAA,IAAI,EAAE,MADK;AAEX,EAAA,KAFW,mBAEH;AACJ,QAAI,OAAM,GAAI,GAAG,CAAC,EAAD,CAAjB;AACA,QAAI,MAAK,GAAI,GAAG,CAAC,EAAD,CAAhB;AACA,QAAI,WAAU,GAAI,GAAG,CAAC,EAAD,CAArB;AACA,QAAI,KAAI,GAAI,GAAG,CAAC,EAAD,CAAf;;AAEA,0BAAmD,cAAc,EAAjE;AAAA,QAAM,SAAN,mBAAM,SAAN;AAAA,QAAiB,QAAjB,mBAAiB,QAAjB;AAAA,QAA2B,mBAA3B,mBAA2B,mBAA3B;;AAEA,aAAS,YAAT,GAAwB;AACpB,UAAI,QAAO,GAAI,IAAI,QAAJ,EAAf;AACA,MAAA,QAAQ,CAAC,MAAT,CAAgB,SAAhB,EAA2B,SAAS,CAAC,KAArC;AACA,MAAA,QAAQ,CAAC,MAAT,CAAgB,OAAhB,EAAyB,KAAK,CAAC,KAA/B;AACA,MAAA,QAAQ,CAAC,MAAT,CAAgB,aAAhB,EAA+B,WAAW,CAAC,KAA3C;AACA,UAAI,OAAM,GAAI,IAAI,cAAJ,EAAd;AACA,MAAA,OAAO,CAAC,IAAR,CAAa,MAAb,EAAqB,+DAArB;AACA,MAAA,OAAO,CAAC,gBAAR,CAAyB,eAAzB,EAA0C,YAAY,YAAY,CAAC,OAAb,CAAqB,WAArB,CAAtD;AACA,MAAA,OAAO,CAAC,IAAR,CAAa,QAAb;;AACA,MAAA,OAAO,CAAC,kBAAR,GAA6B,YAAY;AACrC,YAAI,OAAO,CAAC,UAAR,KAAuB,CAA3B,EAA8B;AAC1B,cAAI,OAAO,CAAC,MAAR,KAAmB,GAAnB,IAA0B,OAAO,CAAC,UAAR,KAAuB,IAArD,EAA2D;AACvD;AACA,iBAAK,OAAL,CAAa,EAAb,CAAgB,CAAhB;AACJ,WAHA,MAGO,CACH;AACJ;AACJ;AACJ,OATA;;AAUA,MAAA,QAAQ,CAAC,KAAT,GAAiB,EAAjB;AACA,MAAA,SAAS,CAAC,KAAV,GAAkB,EAAlB;AACJ;;AACA,WAAO;AACH,MAAA,mBAAmB,EAAnB,mBADG;AAEH,MAAA,QAAQ,EAAR,QAFG;AAGH,MAAA,YAAY,EAAZ,YAHG;AAIH,MAAA,OAAO,EAAP,OAJG;AAKH,MAAA,MAAM,EAAN,MALG;AAMH,MAAA,WAAW,EAAX,WANG;AAOH,MAAA,KAAI,EAAJ;AAPG,KAAP;AASJ;AAzCW,CAAf","sourcesContent":["<template>\r\n    <b-button v-b-toggle.collapse-2 variant=\"success m-2\">建立看版</b-button>\r\n    <form id=\"CREATE_BANNER_FORM\" ref=\"form\" class=\"\" @submit.prevent=\"handleSubmit\">\r\n        <div v-if=\"message\"\r\n        class=\"bg-green-600 text-white rounded p-4 mb-8\">\r\n        {{ message }}\r\n        </div>\r\n    <b-collapse id=\"collapse-2\" class=\"m-2\">\r\n        <b-card>\r\n            <b-row class=\"my-2\">\r\n                <b-col md=\"2\">\r\n                    <label for=\"\">看版名稱</label>\r\n                </b-col>\r\n                <b-col md=\"10\">\r\n                    <b-form-input v-model=\"title\" placeholder=\"請填入看版名稱\"></b-form-input>\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-2\">\r\n                <b-col md=\"2\">\r\n                    <label for=\"\">看版說明</label>\r\n                </b-col>\r\n                <b-col md=\"10\">\r\n                    <b-form-textarea\r\n                        v-model=\"description\"\r\n                        placeholder=\"請填入看版說明\"\r\n                        rows=\"5\"\r\n                        max-rows=\"5\">\r\n                    </b-form-textarea>\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-2\">\r\n                <b-col md=\"2\">\r\n                    <label for=\"\">上傳封面</label>\r\n                </b-col>\r\n                <b-col md=\"10\">\r\n                    <!--  -->\r\n                    <div class=\"min-h-screen flex items-center justify-center\">\r\n                        <div v-if=\"message\"\r\n                            class=\"bg-green-600 text-white rounded p-4 mb-8\">{{ message }}</div>\r\n                        <img v-show=\"imageUrl\"\r\n                            :src=\"imageUrl\"\r\n                            class=\"w-48 h-48 object-cover\"\r\n                            width=\"200\">\r\n                        <div>\r\n                            <input type=\"file\"\r\n                                accept=\"image/*\"\r\n                                @change=\"handleImageSelected\">\r\n                        </div>\r\n                        <div class=\"flex flex-wrap mt-8\">\r\n                            <img v-for=\"(image, key) in images\"\r\n                                :key=\"key\"\r\n                                :src=\"image.image\"\r\n                                class=\"w-48 h-46 object-cover mr-4 mb-4 shadow rounded\">\r\n                        </div>\r\n                    </div>\r\n                    <!--  -->\r\n                </b-col>\r\n                <b-col md=\"12 text-center\">\r\n                    <b-button type=\"submit\" variant=\"success m-2\">創建</b-button>\r\n                </b-col>\r\n            </b-row>\r\n        </b-card>\r\n    </b-collapse>\r\n    </form>\r\n</template>\r\n\r\n<script>\r\nimport { useImageUpload } from './useImageUpload';\r\nimport { ref } from \"vue\";\r\n// import { BannerServer } from \"../../providers/http-server.js\";\r\n\r\nexport default {\r\n    name: \"Home\",\r\n    setup() {\r\n        let message = ref(\"\");\r\n        let images = ref([]);\r\n        let description = ref(\"\");\r\n        let title = ref(\"\");\r\n\r\n        let { imageFile, imageUrl, handleImageSelected } = useImageUpload();\r\n\r\n        function handleSubmit() {\r\n            let formData = new FormData();\r\n            formData.append(\"file_id\", imageFile.value);\r\n            formData.append(\"title\", title.value);\r\n            formData.append(\"description\", description.value);\r\n            var request = new XMLHttpRequest();\r\n            request.open(\"POST\", \"http://localhost/ntcust_lang_backend/public/api/banner/create\");\r\n            request.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('API_TOKEN'));\r\n            request.send(formData);\r\n            request.onreadystatechange = function () {\r\n                if (request.readyState === 4) {\r\n                    if (request.status === 200 && request.statusText === 'OK') {\r\n                        // 建立圖片資料鏈結\r\n                        this.$router.go(0);\r\n                    } else {\r\n                        // console.log('failed');\r\n                    }\r\n                }\r\n            }\r\n            imageUrl.value = \"\";\r\n            imageFile.value = \"\";\r\n        }\r\n        return {\r\n            handleImageSelected,\r\n            imageUrl,\r\n            handleSubmit,\r\n            message,\r\n            images,\r\n            description,\r\n            title\r\n        };\r\n    }\r\n};\r\n</script>\r\n\r\n\r\n"],"sourceRoot":""}]}