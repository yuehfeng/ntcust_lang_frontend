{"remainingRequest":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\www-server\\ntcust_lang_frontend\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\www-server\\ntcust_lang_frontend\\src\\libs\\myUploadAdapter.js","dependencies":[{"path":"C:\\www-server\\ntcust_lang_frontend\\src\\libs\\myUploadAdapter.js","mtime":1654092626936},{"path":"C:\\www-server\\ntcust_lang_frontend\\babel.config.js","mtime":1647072923606},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645007183919},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1645007186797},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\eslint-loader\\index.js","mtime":1645007184600}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOlxcd3d3LXNlcnZlclxcbnRjdXN0X2xhbmdfZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGNsYXNzQ2FsbENoZWNrLmpzIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJDOlxcd3d3LXNlcnZlclxcbnRjdXN0X2xhbmdfZnJvbnRlbmRcXG5vZGVfbW9kdWxlc1xcQGJhYmVsXFxydW50aW1lXFxoZWxwZXJzXFxlc21cXGNyZWF0ZUNsYXNzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7IC8vIGNsYXNzIOaYr2pz55qE5bu65qeL5Ye95byPCgp2YXIgTXlVcGxvYWRBZGFwdGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBNeVVwbG9hZEFkYXB0ZXIobG9hZGVyKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTXlVcGxvYWRBZGFwdGVyKTsKCiAgICAvLyBUaGUgZmlsZSBsb2FkZXIgaW5zdGFuY2UgdG8gdXNlIGR1cmluZyB0aGUgdXBsb2FkLgogICAgdGhpcy5sb2FkZXIgPSBsb2FkZXI7CiAgfSAvLyBTdGFydHMgdGhlIHVwbG9hZCBwcm9jZXNzLgoKCiAgX2NyZWF0ZUNsYXNzKE15VXBsb2FkQWRhcHRlciwgW3sKICAgIGtleTogInVwbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBsb2FkKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIHZhciB1cmwgPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUEksICIvYXBpLyIpLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1BBVEgsICIvYWRtaW4vdXBsb2FkIik7IC8vIHRoaXMubG9hZGVyIOWwseaYr+WbnuWCs+eahOaqlOahiO+8jOiAjOaIkeWAkeS4iuWCs+eahOaqlOahiO+8jOWwseaYr2xvYWRlcuS4i+mdoueahGZpbGXvvIzogIxmaWxl5pivcHJvbWlzZeagvOW8jwogICAgICAvLyByZXNvbHZl55qE5Yqf6IO977yM5piv6YCB57WmQ0tFZGl05L2/55SoCiAgICAgIC8vIOWbnuWCs+aYr+WxrOaWvOmdnuWQjOatpeihjOeCuu+8jOaJgOS7peacg+W7uuS4gOWAi+aWsOeahFByb21pc2UKICAgICAgLy8gaGVhZGVyc+eahOebrueahOaYr+WBmumpl+itiQoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgX3RoaXMubG9hZGVyLmZpbGUudGhlbihmdW5jdGlvbiAobG9hZEZpbGUpIHsKICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZS10by11cGxvYWQnLCBsb2FkRmlsZSk7CiAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCh1cmwsIGZvcm1EYXRhLCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEuaW1hZ2VVcmwpOwogICAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgICBkZWZhdWx0OiByZXNwb25zZS5kYXRhLmltYWdlVXJsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSAvLyBBYm9ydHMgdGhlIHVwbG9hZCBwcm9jZXNzLgoKICB9LCB7CiAgICBrZXk6ICJhYm9ydCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWJvcnQoKSB7CiAgICAgIGlmICh0aGlzLnhocikgewogICAgICAgIHRoaXMueGhyLmFib3J0KCk7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBNeVVwbG9hZEFkYXB0ZXI7Cn0oKTsgLy8g5Yyv5Ye65qqU5qGICgoKZXhwb3J0IGRlZmF1bHQgTXlVcGxvYWRBZGFwdGVyOw=="},{"version":3,"sources":["C:/www-server/ntcust_lang_frontend/src/libs/myUploadAdapter.js"],"names":["axios","MyUploadAdapter","loader","formData","FormData","url","process","env","VUE_APP_API","VUE_APP_PATH","Promise","resolve","file","then","loadFile","append","post","headers","response","console","log","data","imageUrl","default","xhr","abort"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CAEA;;IACMC,e;AACF,2BAAYC,MAAZ,EAAoB;AAAA;;AAChB;AACA,SAAKA,MAAL,GAAcA,MAAd;AACH,G,CAEH;;;;;WACE,kBAAS;AAAA;;AACL,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACA,UAAMC,GAAG,aAAMC,OAAO,CAACC,GAAR,CAAYC,WAAlB,kBAAqCF,OAAO,CAACC,GAAR,CAAYE,YAAjD,kBAAT,CAFK,CAGL;AACA;AACA;AACA;;AACA,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAa;AAChC,QAAA,KAAI,CAACT,MAAL,CAAYU,IAAZ,CAAiBC,IAAjB,CAAsB,UAACC,QAAD,EAAc;AAChCX,UAAAA,QAAQ,CAACY,MAAT,CAAgB,gBAAhB,EAAkCD,QAAlC;AACA,iBAAOd,KAAK,CACXgB,IADM,CACDX,GADC,EACIF,QADJ,EACc;AACjBc,YAAAA,OAAO,EAAE;AACL,8BAAgB;AADX;AADQ,WADd,EAMNJ,IANM,CAMD,UAACK,QAAD,EAAc;AAChBC,YAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAAT,CAAcC,QAA1B;AACAX,YAAAA,OAAO,CAAC;AACJY,cAAAA,OAAO,EAAEL,QAAQ,CAACG,IAAT,CAAcC;AADnB,aAAD,CAAP;AAGH,WAXM,CAAP;AAYH,SAdD;AAeC,OAhBM,CAAP;AAiBH,K,CAED;;;;WACA,iBAAQ;AACJ,UAAI,KAAKE,GAAT,EAAc;AACV,aAAKA,GAAL,CAASC,KAAT;AACH;AACJ;;;;KAGL;;;AACA,eAAexB,eAAf","sourcesContent":["import axios from 'axios';\r\n\r\n// class 是js的建構函式\r\nclass MyUploadAdapter {\r\n    constructor(loader) {\r\n        // The file loader instance to use during the upload.\r\n        this.loader = loader;\r\n    }\r\n\r\n  // Starts the upload process.\r\n    upload() {\r\n        const formData = new FormData();\r\n        const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/upload`;\r\n        // this.loader 就是回傳的檔案，而我們上傳的檔案，就是loader下面的file，而file是promise格式\r\n        // resolve的功能，是送給CKEdit使用\r\n        // 回傳是屬於非同步行為，所以會建一個新的Promise\r\n        // headers的目的是做驗證\r\n        return new Promise((resolve) => {\r\n        this.loader.file.then((loadFile) => {\r\n            formData.append('file-to-upload', loadFile);\r\n            return axios\r\n            .post(url, formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                },\r\n            })\r\n            .then((response) => {\r\n                console.log(response.data.imageUrl);\r\n                resolve({\r\n                    default: response.data.imageUrl,\r\n                });\r\n            });\r\n        });\r\n        });\r\n    }\r\n\r\n    // Aborts the upload process.\r\n    abort() {\r\n        if (this.xhr) {\r\n            this.xhr.abort();\r\n        }\r\n    }\r\n}\r\n\r\n// 匯出檔案\r\nexport default MyUploadAdapter;\r\n"]}]}