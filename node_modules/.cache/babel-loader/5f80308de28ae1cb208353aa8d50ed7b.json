{"remainingRequest":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\www-server\\ntcust_lang_frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\www-server\\ntcust_lang_frontend\\src\\views\\components\\Manage-Link.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\www-server\\ntcust_lang_frontend\\src\\views\\components\\Manage-Link.vue","mtime":1647371487885},{"path":"C:\\www-server\\ntcust_lang_frontend\\babel.config.js","mtime":1647072923606},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645007183919},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1645007186797},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645007183919},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1645007187285}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCB7IExpbmtTZXJ2ZXIgfSBmcm9tICcuLi8uLi9wcm92aWRlcnMvaHR0cC1zZXJ2ZXInOwppbXBvcnQgTWFuYWdlTGlua0NyZWF0ZSBmcm9tICcuL01hbmFnZS1MaW5rLUNyZWF0ZS52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcCcsCiAgY29tcG9uZW50czogewogICAgTWFuYWdlTGlua0NyZWF0ZTogTWFuYWdlTGlua0NyZWF0ZQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGltYWdlRmlsZTogT2JqZWN0LAogICAgICAvLyBNb2RhbAogICAgICBuYW1lU3RhdGU6IGZhbHNlLAogICAgICBtb2RhbFNob3c6IGZhbHNlLAogICAgICAvLyBkYXRhCiAgICAgIGxpbmtzOiBbXSwKICAgICAgZWRpdGluZ2xpbmtzOiBbXSwKICAgICAgY3JlYXRpbmdsaW5rczogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHVybDogJycsCiAgICAgICAgdHlwZTogJycsCiAgICAgICAgZG93bmxvYWQ6IGZhbHNlLAogICAgICAgIG9wdGlvbnM6IDEKICAgICAgfSwKICAgICAgb3B0aW9uczogW3sKICAgICAgICB0ZXh0OiAn57SA6YyE57ay5Z2AJywKICAgICAgICB2YWx1ZTogMQogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ+aqlOahiOS4iuWCsycsCiAgICAgICAgdmFsdWU6IDIKICAgICAgfV0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBMaW5rU2VydmVyLnJlYWQoewogICAgICBhbGw6IGZhbHNlCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICByZXR1cm4gX3RoaXMubGlua3MgPSByZXNwb25zZS5kYXRhOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBlZGl0OiBmdW5jdGlvbiBlZGl0KGluZGV4KSB7CiAgICAgIHRoaXMuZWRpdGluZ2xpbmtzID0gdGhpcy5saW5rc1tpbmRleF07CiAgICB9LAogICAgY2hlY2tGb3JtVmFsaWRpdHk6IGZ1bmN0aW9uIGNoZWNrRm9ybVZhbGlkaXR5KCkgewogICAgICB2YXIgdmFsaWQgPSB0aGlzLiRyZWZzLmZvcm0uY2hlY2tWYWxpZGl0eSgpOwogICAgICB0aGlzLm5hbWVTdGF0ZSA9IHZhbGlkOwogICAgICByZXR1cm4gdmFsaWQ7CiAgICB9LAogICAgY3JlYXRlTGluazogZnVuY3Rpb24gY3JlYXRlTGluaygpIHsKICAgICAgaWYgKHRoaXMuY3JlYXRpbmdsaW5rcy5vcHRpb25zID09IDIpIHsKICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGUiLCB0aGlzLmltYWdlRmlsZS52YWx1ZSk7CiAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICByZXF1ZXN0Lm9wZW4oIlBPU1QiLCAiaHR0cDovL2xvY2FsaG9zdC9udGN1c3RfbGFuZ19iYWNrZW5kL3B1YmxpYy9hcGkvZmlsZS9jcmVhdGUiKTsKICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnQVBJX1RPS0VOJykpOwogICAgICAgIHJlcXVlc3Quc2VuZChmb3JtRGF0YSk7CgogICAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKHJlcXVlc3QucmVhZHlTdGF0ZSA9PT0gNCkgewogICAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDIwMCAmJiByZXF1ZXN0LnN0YXR1c1RleHQgPT09ICdPSycpIHsvLyBjb25zb2xlLmxvZyhKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2UpKTsKICAgICAgICAgICAgfSBlbHNlIHsvLyBjb25zb2xlLmxvZyhKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2UpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHZhciBkYXRhID0gewogICAgICAgIG5hbWU6IHRoaXMuY3JlYXRpbmdsaW5rcy5uYW1lLAogICAgICAgIHVybDogdGhpcy5jcmVhdGluZ2xpbmtzLnVybCwKICAgICAgICB0eXBlOiB0aGlzLmNyZWF0aW5nbGlua3MudHlwZSwKICAgICAgICBkb3dubG9hZDogdGhpcy5jcmVhdGluZ2xpbmtzLmRvd25sb2FkCiAgICAgIH07CiAgICAgIExpbmtTZXJ2ZXIuY3JlYXRlKGRhdGEpLnRoZW4oKTsKICAgIH0sCiAgICB1cGRhdGVMaW5rOiBmdW5jdGlvbiB1cGRhdGVMaW5rKCkgewogICAgICBMaW5rU2VydmVyLnVwZGF0ZSh0aGlzLmVkaXRpbmdsaW5rcy5pZCwgdGhpcy5lZGl0aW5nbGlua3MpLnRoZW4oKTsKICAgIH0sCiAgICBoYW5kbGVJbWFnZVNlbGVjdGVkOiBmdW5jdGlvbiBoYW5kbGVJbWFnZVNlbGVjdGVkKGV2ZW50KSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKGV2ZW50KQogICAgICB0aGlzLmltYWdlRmlsZS52YWx1ZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["C:\\www-server\\ntcust_lang_frontend\\src\\views\\components\\Manage-Link.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <ManageLinkCreate></ManageLinkCreate>\r\n    <!-- 編輯用 -->\r\n    <b-modal\r\n        id=\"modal-prevent-closing-4\"\r\n        ref=\"modal-4\"\r\n        title=\"編輯網址資料\"\r\n        @ok=\"updateLink\"\r\n    >\r\n        <form ref=\"form\" @submit.stop.prevent=\"handleSubmit\">\r\n            <b-form-group\r\n                label=\"連結名稱\"\r\n                label-for=\"UPDATE_LINK_NAME\"\r\n                invalid-feedback=\"Name is required\"\r\n            >\r\n                <b-form-input\r\n                    id=\"UPDATE_LINK_NAME\"\r\n                    v-model=\"editinglinks.name\"\r\n                    placeholder=\"請填入連結名稱\"\r\n                    required\r\n                ></b-form-input>\r\n            </b-form-group>\r\n            <b-form-group\r\n                label=\"網址\"\r\n                label-for=\"UPDATE_LINK_URL\"\r\n                invalid-feedback=\"Name is required\"\r\n            >\r\n                <b-form-input\r\n                    id=\"UPDATE_LINK_URL\"\r\n                    v-model=\"editinglinks.url\"\r\n                    placeholder=\"請填入網址\"\r\n                    required\r\n                ></b-form-input>\r\n            </b-form-group>\r\n            <b-form-group\r\n                label=\"網址分類\"\r\n                label-for=\"UPDATE_LINK_TYPE\"\r\n                invalid-feedback=\"\"\r\n            >\r\n                <b-form-input\r\n                    id=\"UPDATE_LINK_TYPE\"\r\n                    v-model=\"editinglinks.type\"\r\n                    placeholder=\"請填入網址分類\"\r\n                    required\r\n                ></b-form-input>\r\n            </b-form-group>\r\n        </form>\r\n    </b-modal>\r\n\r\n    <div>\r\n        <table class=\"table w-100 table-hover\">\r\n            <thead>\r\n                <tr>\r\n                    <th scope=\"col\">#</th>\r\n                    <th scope=\"col\">連結名稱</th>\r\n                    <th scope=\"col\">網站地址</th>\r\n                    <th scope=\"col\">類型</th>\r\n                    <th scope=\"col\">操作</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr v-for=\"(item, index) in links\" :key=\"item.id\">\r\n                    <th scope=\"row\">{{ index + 1}}</th>\r\n                    <td>{{ item.name }}</td>\r\n                    <td>\r\n                        <a v-if=\"item.download\" :href=\"'http://localhost/ntcust_lang_backend/public/api/file/' + item.url\" title=\"\">\r\n                            <b-button variant=\"warning m-2\"\r\n                                v-b-popover.hover.bottom=\"'file/' + item.url\" \r\n                                title=\"查看檔案\">\r\n                                檔案\r\n                            </b-button>\r\n                        </a>\r\n                        <a v-if=\"!item.download\" :href=\"item.url\" title=\"\">\r\n                            <b-button variant=\"info m-2\"\r\n                                v-b-popover.hover.bottom=\"item.url\" \r\n                                title=\"查看連結\">\r\n                                連結\r\n                            </b-button>\r\n                        </a>\r\n                    </td>\r\n                    <td>{{ item.type }}</td>\r\n                    <td>\r\n                        <b-button \r\n                        variant=\"success m-1 text-end\"\r\n                        v-b-modal.modal-prevent-closing-4\r\n                        @click=\"edit(index)\">\r\n                            編輯\r\n                        </b-button>\r\n                        <b-button variant=\"danger m-2\">刪除</b-button>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\nimport { LinkServer } from '../../providers/http-server';\r\nimport ManageLinkCreate from './Manage-Link-Create.vue';\r\n\r\nexport default {\r\n    name: 'App',\r\n    components: {\r\n        ManageLinkCreate\r\n    },\r\n    data(){\r\n        return {\r\n            imageFile: Object,\r\n            // Modal\r\n            nameState: false,\r\n            modalShow: false,\r\n            // data\r\n            links: [],\r\n            editinglinks: [],\r\n            creatinglinks: {\r\n                name: '',\r\n                url: '',\r\n                type: '',\r\n                download: false,\r\n                options: 1\r\n            },\r\n            options: [\r\n                { text: '紀錄網址', value: 1 },\r\n                { text: '檔案上傳', value: 2 },\r\n            ]\r\n        }\r\n    },\r\n    created(){\r\n        LinkServer.read({all: false}).then(\r\n            (response) => this.links = response.data\r\n        );\r\n    },\r\n    methods: {\r\n        edit(index) {\r\n            this.editinglinks = this.links[index];\r\n        },\r\n        checkFormValidity() {\r\n            const valid = this.$refs.form.checkValidity()\r\n            this.nameState = valid\r\n            return valid\r\n        },\r\n        createLink() {\r\n            if(this.creatinglinks.options == 2) {\r\n                var formData = new FormData();\r\n                formData.append(\"file\", this.imageFile.value);\r\n                var request = new XMLHttpRequest();\r\n                request.open(\"POST\", \"http://localhost/ntcust_lang_backend/public/api/file/create\");\r\n                request.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('API_TOKEN'));\r\n                request.send(formData);\r\n                request.onreadystatechange = function () {\r\n                    if (request.readyState === 4) {\r\n                        if (request.status === 200 && request.statusText === 'OK') {\r\n                            // console.log(JSON.parse(request.response));\r\n                        } else {\r\n                            // console.log(JSON.parse(request.response));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            let data = {\r\n                name: this.creatinglinks.name,\r\n                url: this.creatinglinks.url,\r\n                type: this.creatinglinks.type,\r\n                download: this.creatinglinks.download\r\n            };\r\n            LinkServer.create(data).then(\r\n                // (response) => console.log(response)\r\n            );\r\n            \r\n        },\r\n        updateLink() {\r\n            LinkServer.update(this.editinglinks.id, this.editinglinks).then(\r\n                // (response) => console.log(response)\r\n            );\r\n        },\r\n        handleImageSelected(event) {\r\n            // console.log(event)\r\n            this.imageFile.value = event.target.files[0];\r\n        }\r\n    }\r\n}\r\n</script>\r\n"],"sourceRoot":""}]}