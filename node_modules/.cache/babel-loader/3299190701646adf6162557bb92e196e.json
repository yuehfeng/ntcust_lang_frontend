{"remainingRequest":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\www-server\\ntcust_lang_frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\www-server\\ntcust_lang_frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\www-server\\ntcust_lang_frontend\\src\\views\\components\\Manage-Link-Create.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\www-server\\ntcust_lang_frontend\\src\\views\\components\\Manage-Link-Create.vue","mtime":1654765759628},{"path":"C:\\www-server\\ntcust_lang_frontend\\babel.config.js","mtime":1647072923606},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645007183919},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1645007183892},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1645007186797},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645007183919},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1645007187285}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgdXNlSW1hZ2VVcGxvYWQgfSBmcm9tICcuL3VzZUltYWdlVXBsb2FkJzsKaW1wb3J0IHsgTGlua1NlcnZlciwgRmlsZUxpbmtTZXJ2ZXIgfSBmcm9tICcuLi8uLi9wcm92aWRlcnMvaHR0cC1zZXJ2ZXInOwppbXBvcnQgeyByZWYgfSBmcm9tICJ2dWUiOwp2YXIgcmVzcG9uc2UgPSB7CiAgc3RhdHVzOiBmYWxzZSwKICBmZWVkYmFjazogZmFsc2UsCiAgZXJyb3I6IGZhbHNlLAogIGNvZGU6IDIwMAp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhvbWUiLAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBpbWFnZXMgPSByZWYoW10pOwogICAgdmFyIGxpbmtOYW1lID0gcmVmKCIiKTsKICAgIHZhciBsaW5rVHlwZSA9IHJlZigiIik7CiAgICB2YXIgdXJsID0gcmVmKCIiKTsKCiAgICB2YXIgX3VzZUltYWdlVXBsb2FkID0gdXNlSW1hZ2VVcGxvYWQoKSwKICAgICAgICBpbWFnZUZpbGUgPSBfdXNlSW1hZ2VVcGxvYWQuaW1hZ2VGaWxlLAogICAgICAgIGltYWdlVXJsID0gX3VzZUltYWdlVXBsb2FkLmltYWdlVXJsLAogICAgICAgIGhhbmRsZUltYWdlU2VsZWN0ZWQgPSBfdXNlSW1hZ2VVcGxvYWQuaGFuZGxlSW1hZ2VTZWxlY3RlZDsKCiAgICBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoKSB7CiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoImZpbGUiLCBpbWFnZUZpbGUudmFsdWUpOwogICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICByZXF1ZXN0Lm9wZW4oIlBPU1QiLCAiaHR0cDovL2xvY2FsaG9zdC9udGN1c3RfbGFuZ19iYWNrZW5kL3B1YmxpYy9hcGkvZmlsZS9jcmVhdGUiKTsKICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0JlYXJlciAnICsgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0FQSV9UT0tFTicpKTsKICAgICAgcmVxdWVzdC5zZW5kKGZvcm1EYXRhKTsKCiAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgPT09IDQpIHsKICAgICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMjAwICYmIHJlcXVlc3Quc3RhdHVzVGV4dCA9PT0gJ09LJykgewogICAgICAgICAgICBGaWxlTGlua1NlcnZlci5jcmVhdGUoewogICAgICAgICAgICAgIGZpbGVfaWQ6IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZSkuZGF0YS5pZCwKICAgICAgICAgICAgICB0eXBlX2lkOiA2LAogICAgICAgICAgICAgIHNoZWV0X2lkOiAwCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdGSUxFX0lEJywgSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlKS5kYXRhLmlkKTsKICAgICAgICAgICAgfSk7IC8vIGNvbnNvbGUubG9nKEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZSkpCgogICAgICAgICAgICB0aGlzLnJlc3BvbnNlLmVycm9yID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMucmVzcG9uc2Uuc3RhdHVzID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKDApOwogICAgICAgICAgfSBlbHNlIHsvLyBjb25zb2xlLmxvZygnZmFpbGVkJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwogICAgfQoKICAgIHJldHVybiB7CiAgICAgIGhhbmRsZUltYWdlU2VsZWN0ZWQ6IGhhbmRsZUltYWdlU2VsZWN0ZWQsCiAgICAgIGltYWdlVXJsOiBpbWFnZVVybCwKICAgICAgaGFuZGxlU3VibWl0OiBoYW5kbGVTdWJtaXQsCiAgICAgIGltYWdlczogaW1hZ2VzLAogICAgICBsaW5rTmFtZTogbGlua05hbWUsCiAgICAgIGxpbmtUeXBlOiBsaW5rVHlwZSwKICAgICAgdXJsOiB1cmwsCiAgICAgIHJlc3BvbnNlOiByZXNwb25zZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNvbXBsZXRlRmlsZTogZnVuY3Rpb24gY29tcGxldGVGaWxlKCkgewogICAgICBMaW5rU2VydmVyLmNyZWF0ZSh7CiAgICAgICAgdXJsOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnRklMRV9JRCcpLAogICAgICAgIG5hbWU6IHRoaXMubGlua05hbWUsCiAgICAgICAgdHlwZTogdGhpcy5saW5rVHlwZSwKICAgICAgICBkb3dubG9hZDogMQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIEZpbGVMaW5rU2VydmVyLnVwZGF0ZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnRklMRV9JRCcpLCB7CiAgICAgICAgICBzaGVldF9pZDogcmVzcG9uc2UuZGF0YS5pZAogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJGSUxFX0lEIik7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGNvbXBsZXRlVVJMOiBmdW5jdGlvbiBjb21wbGV0ZVVSTCgpIHsKICAgICAgTGlua1NlcnZlci5jcmVhdGUoewogICAgICAgIHVybDogdGhpcy51cmwsCiAgICAgICAgbmFtZTogdGhpcy5saW5rTmFtZSwKICAgICAgICB0eXBlOiB0aGlzLmxpbmtUeXBlLAogICAgICAgIGRvd25sb2FkOiAwCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgey8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:\\www-server\\ntcust_lang_frontend\\src\\views\\components\\Manage-Link-Create.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <b-alert v-model=\"response.status\" variant=\"success\" dismissible>\r\n        操作成功\r\n    </b-alert>\r\n    <b-alert v-model=\"response.error\" variant=\"danger\" dismissible>\r\n        {{ response.feedback }}\r\n    </b-alert>\r\n    <b-button v-b-toggle.collapse-2 variant=\"success m-2\">建立網址</b-button>\r\n    <b-collapse id=\"collapse-2\" class=\"m-2\">\r\n        <b-card>\r\n            <b-row class=\"my-2\">\r\n                <b-col md=\"2\">\r\n                    <label for=\"\">連結名稱</label>\r\n                </b-col>\r\n                <b-col md=\"10\">\r\n                    <b-form-input v-model=\"linkName\" placeholder=\"請填入連結名稱\"></b-form-input>\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-2\">\r\n                <b-col md=\"2\">\r\n                    <label for=\"\">連結分類</label>\r\n                </b-col>\r\n                <b-col md=\"10\">\r\n                    <b-form-input v-model=\"linkType\" placeholder=\"請填入連結分類\"></b-form-input>\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-2\">\r\n                <b-col md=\"2\">\r\n                    <label for=\"\">填寫網址</label>\r\n                </b-col>\r\n                <b-col md=\"10\">\r\n                    <b-form-input v-model=\"url\" placeholder=\"請填寫網址\"></b-form-input>\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-2 text-center\">\r\n                <b-col md=\"12\">\r\n                    <b-button variant=\"primary m-2\" \r\n                        @click=\"completeURL\">\r\n                        建立完成\r\n                    </b-button>\r\n                </b-col>\r\n            </b-row>\r\n        </b-card>\r\n    </b-collapse>\r\n    <b-button v-b-toggle.collapse-file variant=\"success m-2\">建立檔案</b-button>\r\n    <b-collapse id=\"collapse-file\" class=\"m-2\">\r\n        <b-card>\r\n            <b-row class=\"my-2\">\r\n                <b-col md=\"2\">\r\n                    <label for=\"\">連結名稱</label>\r\n                </b-col>\r\n                <b-col md=\"10\">\r\n                    <b-form-input v-model=\"linkName\" placeholder=\"請填入連結名稱\"></b-form-input>\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-2\">\r\n                <b-col md=\"2\">\r\n                    <label for=\"\">連結分類</label>\r\n                </b-col>\r\n                <b-col md=\"10\">\r\n                    <b-form-input v-model=\"linkType\" placeholder=\"請填入連結分類\"></b-form-input>\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-2\">\r\n                <b-col md=\"2\">\r\n                    <label for=\"\">填寫網址</label>\r\n                </b-col>\r\n                <b-col md=\"10\">\r\n                    <form id=\"form\" ref=\"form\" class=\"\" @submit.prevent=\"handleSubmit\">\r\n                    <input type=\"file\" @change=\"handleImageSelected\">\r\n                    <b-button variant=\"success m-2\" \r\n                        type=\"submit\">\r\n                        確認檔案\r\n                    </b-button>\r\n                    </form>\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-2 text-center\">\r\n                <b-col md=\"12\">\r\n                    <b-button variant=\"primary m-2\" \r\n                        @click=\"completeFile\">\r\n                        建立完成\r\n                    </b-button>\r\n                </b-col>\r\n            </b-row>\r\n        </b-card>\r\n    </b-collapse>\r\n</template>\r\n\r\n<script>\r\n// import axios from 'axios';\r\nimport { useImageUpload } from './useImageUpload';\r\nimport { LinkServer, FileLinkServer } from '../../providers/http-server';\r\nimport { ref } from \"vue\";\r\nlet response = {\r\n    status: false,\r\n    feedback: false,\r\n    error: false,\r\n    code: 200\r\n};\r\n\r\nexport default {\r\n    name: \"Home\",\r\n    setup() {\r\n        var images = ref([]);\r\n        var linkName = ref(\"\");\r\n        var linkType = ref(\"\");\r\n        var url = ref(\"\");\r\n        \r\n        var { imageFile, imageUrl, handleImageSelected } = useImageUpload();\r\n\r\n        function handleSubmit() {\r\n            var formData = new FormData();\r\n            formData.append(\"file\", imageFile.value);\r\n            var request = new XMLHttpRequest();\r\n            request.open(\"POST\", \"http://localhost/ntcust_lang_backend/public/api/file/create\");\r\n            request.setRequestHeader('Authorization', 'Bearer ' + localStorage.getItem('API_TOKEN'));\r\n            request.send(formData);\r\n            request.onreadystatechange = function () {\r\n                if (request.readyState === 4) {\r\n                    if (request.status === 200 && request.statusText === 'OK') {\r\n                        FileLinkServer.create({\r\n                            file_id: JSON.parse(request.response).data.id,\r\n                            type_id: 6,\r\n                            sheet_id: 0\r\n                        }).then(() => {\r\n                            localStorage.setItem('FILE_ID', JSON.parse(request.response).data.id);\r\n                        });\r\n                        // console.log(JSON.parse(request.response))\r\n                        this.response.error = false;\r\n                        this.response.status = true;\r\n                        this.$router.go(0);\r\n                    } else {\r\n                        // console.log('failed');\r\n                    }\r\n                }\r\n            }\r\n            \r\n        }\r\n        return {\r\n            handleImageSelected,\r\n            imageUrl,\r\n            handleSubmit,\r\n            images,\r\n            linkName,\r\n            linkType,\r\n            url,\r\n            response\r\n        };\r\n    },\r\n    methods: {\r\n        completeFile() {\r\n            LinkServer.create({\r\n                url: localStorage.getItem('FILE_ID'),\r\n                name: this.linkName,\r\n                type: this.linkType,\r\n                download: 1\r\n            }).then((response) => {\r\n                FileLinkServer.update(localStorage.getItem('FILE_ID'), {\r\n                    sheet_id: response.data.id\r\n                }).then(() => {\r\n                    // console.log(res);\r\n                    localStorage.removeItem(\"FILE_ID\");\r\n                });\r\n            });\r\n        },\r\n        completeURL() {\r\n            LinkServer.create({\r\n                url: this.url,\r\n                name: this.linkName,\r\n                type: this.linkType,\r\n                download: 0\r\n            }).then(() => {\r\n                // console.log(response);\r\n            });\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped></style>"],"sourceRoot":""}]}