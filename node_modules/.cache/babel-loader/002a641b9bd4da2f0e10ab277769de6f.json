{"remainingRequest":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\www-server\\ntcust_lang_frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\www-server\\ntcust_lang_frontend\\src\\views\\components\\Manage-Album.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\www-server\\ntcust_lang_frontend\\src\\views\\components\\Manage-Album.vue","mtime":1654769586687},{"path":"C:\\www-server\\ntcust_lang_frontend\\babel.config.js","mtime":1647072923606},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645007183919},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1645007186797},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645007183919},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1645007187285}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JzsKaW1wb3J0IE1hbmFnZUFsYnVtQ3JlYXRlIGZyb20gJy4uL2NvbXBvbmVudHMvTWFuYWdlLUFsYnVtLUNyZWF0ZS52dWUnOwppbXBvcnQgeyBBbGJ1bVNlcnZlciwgRmlsZVNlcnZlciB9IGZyb20gJy4uLy4uL3Byb3ZpZGVycy9odHRwLXNlcnZlcic7CmltcG9ydCBDbGFzc2ljRWRpdG9yIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtYnVpbGQtY2xhc3NpYyc7CmltcG9ydCBNeVVwbG9hZEFkYXB0ZXIgZnJvbSAnLi4vLi4vbGlicy9teVVwbG9hZEFkYXB0ZXInOwoKZnVuY3Rpb24gTXlDdXN0b21VcGxvYWRBZGFwdGVyUGx1Z2luKGVkaXRvcikgewogIGVkaXRvci5wbHVnaW5zLmdldCgnRmlsZVJlcG9zaXRvcnknKS5jcmVhdGVVcGxvYWRBZGFwdGVyID0gZnVuY3Rpb24gKGxvYWRlcikgewogICAgcmV0dXJuIG5ldyBNeVVwbG9hZEFkYXB0ZXIobG9hZGVyKTsKICB9Owp9CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcCcsCiAgY29tcG9uZW50czogewogICAgTWFuYWdlQWxidW1DcmVhdGU6IE1hbmFnZUFsYnVtQ3JlYXRlCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVuZGVyQ29tcG9uZW50OiB0cnVlLAogICAgICBhbGJ1bXM6IFtdLAogICAgICBlZGl0aW5nOiB7CiAgICAgICAgY3VycmVudDogMCwKICAgICAgICBkYXRhOiBbXQogICAgICB9LAogICAgICBjaGFuZ2VTZWxlY3Q6IGZhbHNlLAogICAgICBwaG90b3M6IFtdLAogICAgICBlZGl0b3I6IENsYXNzaWNFZGl0b3IsCiAgICAgIGVkaXRvckNvbmZpZzogewogICAgICAgIGV4dHJhUGx1Z2luczogW015Q3VzdG9tVXBsb2FkQWRhcHRlclBsdWdpbl0KICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMubW9tZW50ID0gbW9tZW50OwogICAgQWxidW1TZXJ2ZXIucmVhZEFMTCh7CiAgICAgIGFsbDogdHJ1ZQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UpCiAgICAgIF90aGlzLmFsYnVtcyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIF90aGlzLmVkaXRpbmcuZGF0YSA9IF90aGlzLmFsYnVtc1swXTsKICAgICAgX3RoaXMuZWRpdGluZy5jdXJyZW50ID0gMDsKICAgICAgRmlsZVNlcnZlci5maWx0ZXIoNSwgX3RoaXMuZWRpdGluZy5kYXRhLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICByZXR1cm4gX3RoaXMucGhvdG9zID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGVEYXRhOiBmdW5jdGlvbiB1cGRhdGVEYXRhKGlkKSB7CiAgICAgIEFsYnVtU2VydmVyLnVwZGF0ZShpZCwgdGhpcy5lZGl0aW5nLmRhdGEpLnRoZW4oKTsKICAgIH0sCiAgICBkZWxldGVEYXRhOiBmdW5jdGlvbiBkZWxldGVEYXRhKGlkKSB7CiAgICAgIEFsYnVtU2VydmVyLmRlbGV0ZShpZCkudGhlbigpOyAvLyB0aGlzLiRyb3V0ZXIuZ28oMCk7CiAgICB9LAogICAgc2VsZWN0OiBmdW5jdGlvbiBzZWxlY3QobnVtKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5lZGl0aW5nLmN1cnJlbnQgPSBudW07CiAgICAgIHRoaXMuZWRpdGluZy5kYXRhID0gdGhpcy5hbGJ1bXNbbnVtXTsKICAgICAgRmlsZVNlcnZlci5maWx0ZXIoNSwgdGhpcy5lZGl0aW5nLmRhdGEuaWQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHJldHVybiBfdGhpczIucGhvdG9zID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZUZpbGU6IGZ1bmN0aW9uIGRlbGV0ZUZpbGUoaWQpIHsKICAgICAgRmlsZVNlcnZlci5kZWxldGUoaWQpLnRoZW4oKTsKICAgIH0sCiAgICBjb3ZlckZpbGU6IGZ1bmN0aW9uIGNvdmVyRmlsZShpZCkgewogICAgICB2YXIgZGF0YSA9IHsKICAgICAgICBjb3Zlcl9maWxlOiBpZAogICAgICB9OwogICAgICBBbGJ1bVNlcnZlci51cGRhdGUodGhpcy5lZGl0aW5nLmRhdGEuaWQsIGRhdGEpLnRoZW4oKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["C:\\www-server\\ntcust_lang_frontend\\src\\views\\components\\Manage-Album.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <ManageAlbumCreate></ManageAlbumCreate>\r\n    <b-tab title=\"消息管理\" active  v-if=\"renderComponent\">\r\n        <b-row>\r\n            <b-col md=\"3\">\r\n                <b-list-group v-for=\"(item,index) in albums\" :key=\"index\">\r\n                    <b-list-group-item active v-if=\"index == editing.current\" @click=\"select(index)\">\r\n                        <b-badge>{{ item.id }}</b-badge>\r\n                        {{ item.name }}\r\n                    </b-list-group-item>\r\n                    <b-list-group-item v-if=\"index != editing.current\" @click=\"select(index)\">\r\n                        <b-badge>{{ item.id }}</b-badge>\r\n                        {{ item.name }}\r\n                    </b-list-group-item>\r\n                </b-list-group>\r\n            </b-col>\r\n            <b-col md=\"9\">\r\n                <b-row class=\"my-2\">\r\n                    <b-col md=\"2\">\r\n                        <label for=\"\">相簿編號</label>\r\n                    </b-col>\r\n                    <b-col md=\"10\">\r\n                        <b-form-input v-model=\"editing.data.id\" placeholder=\"Enter your name\" disabled></b-form-input>\r\n                    </b-col>\r\n                </b-row>\r\n                <b-row class=\"my-2\">\r\n                    <b-col md=\"2\">\r\n                        <label for=\"\">相簿名稱</label>\r\n                    </b-col>\r\n                    <b-col md=\"10\">\r\n                        <b-form-input v-model=\"editing.data.name\" placeholder=\"Enter your name\"></b-form-input>\r\n                    </b-col>\r\n                </b-row>\r\n                <b-row class=\"my-2\">\r\n                    <b-col md=\"2\">\r\n                        <label for=\"\">內文</label>\r\n                    </b-col>\r\n                    <b-col md=\"10\">\r\n                        <ckeditor v-model=\"editing.data.context\" :config=\"editorConfig\" :editor=\"editor\"></ckeditor>\r\n                    </b-col>\r\n                </b-row>\r\n                <b-row class=\"my-2\">\r\n                    <b-col md=\"2\">\r\n                        <label for=\"\">說明</label>\r\n                    </b-col>\r\n                    <b-col md=\"10\">\r\n                        <ckeditor v-model=\"editing.data.description\" :config=\"editorConfig\" :editor=\"editor\"></ckeditor>\r\n                    </b-col>\r\n                </b-row>\r\n                <b-row class=\"my-2\">\r\n                    <b-col md=\"2\">\r\n                        <label for=\"\">建立時間</label>\r\n                    </b-col>\r\n                    <b-col md=\"10\">\r\n                        <b-form-input disabled v-model=\"editing.data.created_at\" placeholder=\"Enter your name\"></b-form-input>\r\n                    </b-col>\r\n                </b-row>\r\n                <b-row class=\"my-2\">\r\n                    <b-col md=\"2\">\r\n                        <label for=\"\">更新時間</label>\r\n                    </b-col>\r\n                    <b-col md=\"10\">\r\n                        <b-form-input disabled v-model=\"editing.data.updated_at\" placeholder=\"Enter your name\"></b-form-input>\r\n                    </b-col>\r\n                </b-row>\r\n                <b-row class=\"my-2\">\r\n                    <b-col md=\"2\">\r\n                        <label for=\"\">圖片</label>\r\n                    </b-col>\r\n                    <b-col md=\"10\">\r\n                        <b-row>\r\n                            <b-col md=\"4 text-center mt-2\" v-for=\"item in photos\" :key=\"item.id\">\r\n                                <b-card :img-src=\"'http://localhost/ntcust_lang_backend/storage/app/' + item.file.path\" \r\n                                img-alt=\"Image\" \r\n                                img-top>\r\n                                    <b-button v-if=\"editing.data.cover.id == item.id\" @click=\"coverFile(item.id)\" variant=\"info m-2\">目前封面</b-button>\r\n                                    <b-button v-else @click=\"coverFile(item.id)\" variant=\"outline-info m-2\">設為封面</b-button>\r\n                                    \r\n                                    <b-button @click=\"deleteFile(item.id)\" variant=\"danger m-2\">刪除</b-button>\r\n                                    <template #footer>更新於{{ moment(item.updated_at).format(\"YYYY-MM-DD HH:MM\") }}</template>\r\n                                </b-card>\r\n                            </b-col>\r\n                        </b-row>\r\n                    </b-col>\r\n                </b-row>\r\n                <b-row>\r\n                    <b-col md=\"12 text-center\">\r\n                        <b-button variant=\"success m-2\" @click=\"updateData(editing.data.id)\">更新</b-button>\r\n                        <b-button variant=\"danger m-2\" @click=\"deleteData(editing.data.id)\">刪除</b-button>\r\n                    </b-col>\r\n                </b-row>    \r\n            </b-col>\r\n        </b-row>\r\n    </b-tab>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment'\r\nimport ManageAlbumCreate from '../components/Manage-Album-Create.vue';\r\nimport { AlbumServer, FileServer } from '../../providers/http-server';\r\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\r\nimport MyUploadAdapter from '../../libs/myUploadAdapter';\r\n\r\nfunction MyCustomUploadAdapterPlugin(editor) {\r\n    editor.plugins.get('FileRepository').createUploadAdapter = (loader) => new MyUploadAdapter(loader);\r\n}\r\n\r\nexport default {\r\n    name: 'App',\r\n    components: {\r\n        ManageAlbumCreate\r\n    },\r\n    data(){\r\n        return {\r\n            renderComponent: true,\r\n            albums: [],\r\n            editing: {\r\n                current: 0,\r\n                data: [],\r\n            },\r\n            changeSelect: false,\r\n            photos: [],\r\n            editor: ClassicEditor,\r\n            editorConfig: {\r\n                extraPlugins: [MyCustomUploadAdapterPlugin],\r\n            }\r\n        }\r\n    },\r\n    created(){\r\n        this.moment = moment;\r\n        AlbumServer.readALL({all: true}).then(\r\n            (response) => {\r\n                // console.log(response)\r\n                this.albums = response.data;\r\n                this.editing.data = this.albums[0];\r\n                this.editing.current = 0;\r\n                FileServer.filter(5, this.editing.data.id).then(\r\n                    (res) => this.photos = res.data\r\n                );\r\n            }\r\n        );\r\n    },\r\n    methods: {\r\n        updateData(id){\r\n            AlbumServer.update(id, this.editing.data).then(\r\n                // (response) => console.log(response)\r\n            );\r\n        },\r\n        deleteData(id){\r\n            AlbumServer.delete(id).then(\r\n                // (response) => console.log(response)\r\n            );\r\n            // this.$router.go(0);\r\n        },\r\n        select(num){\r\n            this.editing.current = num;\r\n            this.editing.data = this.albums[num];\r\n            FileServer.filter(5, this.editing.data.id).then(\r\n                (res) => this.photos = res.data\r\n            );\r\n        },\r\n        deleteFile(id) {\r\n            FileServer.delete(id).then(\r\n                // (response) => console.log(response)\r\n            );\r\n        },\r\n        coverFile(id) {\r\n            let data = {\r\n                cover_file: id\r\n            };\r\n            AlbumServer.update(this.editing.data.id, data).then(\r\n                // (res) => console.log(res)\r\n            );\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped></style>"],"sourceRoot":""}]}