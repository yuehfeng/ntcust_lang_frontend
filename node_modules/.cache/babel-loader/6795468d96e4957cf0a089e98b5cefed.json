{"remainingRequest":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\www-server\\ntcust_lang_frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\www-server\\ntcust_lang_frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\www-server\\ntcust_lang_frontend\\src\\views\\components\\Manage-Album-Create.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\www-server\\ntcust_lang_frontend\\src\\views\\components\\Manage-Album-Create.vue","mtime":1646224665174},{"path":"C:\\www-server\\ntcust_lang_frontend\\babel.config.js","mtime":1642665566574},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645007183919},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1645007183892},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1645007186797},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645007183919},{"path":"C:\\www-server\\ntcust_lang_frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1645007187285}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IHVzZUltYWdlVXBsb2FkIH0gZnJvbSAnLi91c2VJbWFnZVVwbG9hZCc7CmltcG9ydCB7IHJlZiB9IGZyb20gInZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSG9tZSIsCiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIG1lc3NhZ2UgPSByZWYoIiIpOwogICAgdmFyIGltYWdlcyA9IHJlZihbXSk7CiAgICB2YXIgYWxidW1OYW1lID0gcmVmKCIiKTsKICAgIHZhciBhbGJ1bURlc2NyaXB0aW9uID0gcmVmKCIiKTsKICAgIHZhciBhbGJ1bUNvbnRleHQgPSByZWYoIiIpOwogICAgdmFyIHN1Y2Nlc3NJRCA9IHJlZigiIik7CiAgICB2YXIgbnVtUGhvdG8gPSByZWYoIiIpOwoKICAgIHZhciBfdXNlSW1hZ2VVcGxvYWQgPSB1c2VJbWFnZVVwbG9hZCgpLAogICAgICAgIGltYWdlRmlsZSA9IF91c2VJbWFnZVVwbG9hZC5pbWFnZUZpbGUsCiAgICAgICAgaW1hZ2VVcmwgPSBfdXNlSW1hZ2VVcGxvYWQuaW1hZ2VVcmwsCiAgICAgICAgaGFuZGxlSW1hZ2VTZWxlY3RlZCA9IF91c2VJbWFnZVVwbG9hZC5oYW5kbGVJbWFnZVNlbGVjdGVkOwoKICAgIGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBkYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGRhdGEuYXBwZW5kKCJmaWxlIiwgaW1hZ2VGaWxlLnZhbHVlKTsKICAgICAgZGF0YS5hcHBlbmQoInR5cGVfaWQiLCA1KTsKICAgICAgZGF0YS5hcHBlbmQoInNoZWV0X2lkIiwgdGhpcy5zdWNjZXNzSUQpOwogICAgICBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdC9udGN1c3RfbGFuZ19iYWNrZW5kL3B1YmxpYy9hcGkvZmlsZS9jcmVhdGUnLAogICAgICAgIGRhdGE6IGRhdGEsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgICAgICJBY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAiQXV0aG9yaXphdGlvbiI6ICdCZWFyZXIgJyArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdBUElfVE9LRU4nKQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMubnVtUGhvdG8gKz0gMTsKICAgICAgICBfdGhpcy5tZXNzYWdlID0gIuWclueJh+S4iuWCs+WclueJh+aIkOWKn++8jOebruWJjeWFseioiCIgKyBfdGhpcy5udW1QaG90byArICLlvLXlnJbniYciOyAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coUHJvbWlzZS5yZWplY3QoZXJyb3IpKTsKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgaGFuZGxlSW1hZ2VTZWxlY3RlZDogaGFuZGxlSW1hZ2VTZWxlY3RlZCwKICAgICAgaW1hZ2VVcmw6IGltYWdlVXJsLAogICAgICBoYW5kbGVTdWJtaXQ6IGhhbmRsZVN1Ym1pdCwKICAgICAgbWVzc2FnZTogbWVzc2FnZSwKICAgICAgaW1hZ2VzOiBpbWFnZXMsCiAgICAgIGFsYnVtTmFtZTogYWxidW1OYW1lLAogICAgICBhbGJ1bURlc2NyaXB0aW9uOiBhbGJ1bURlc2NyaXB0aW9uLAogICAgICBhbGJ1bUNvbnRleHQ6IGFsYnVtQ29udGV4dCwKICAgICAgc3VjY2Vzc0lEOiBzdWNjZXNzSUQsCiAgICAgIG51bVBob3RvOiBudW1QaG90bwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNyZWF0ZURhdGE6IGZ1bmN0aW9uIGNyZWF0ZURhdGEoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgYXhpb3MoewogICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3QvbnRjdXN0X2xhbmdfYmFja2VuZC9wdWJsaWMvYXBpL2FsYnVtL2NyZWF0ZScsCiAgICAgICAgZGF0YTogewogICAgICAgICAgbmFtZTogdGhpcy5hbGJ1bU5hbWUsCiAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5hbGJ1bURlc2NyaXB0aW9uLAogICAgICAgICAgY29udGV4dDogdGhpcy5hbGJ1bUNvbnRleHQKICAgICAgICB9LAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgICAiQWNjZXB0IjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgICAgIkF1dGhvcml6YXRpb24iOiAnQmVhcmVyICcgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnQVBJX1RPS0VOJykKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLm51bVBob3RvID0gMDsKICAgICAgICBfdGhpczIubWVzc2FnZSA9ICLnm7jnsL/mlrDlop7miJDlip/vvIzoq4vkuIrlgrPnm7jniYfjgIIiOwogICAgICAgIF90aGlzMi5zdWNjZXNzSUQgPSByZXNwb25zZS5kYXRhLmRhdGEuaWQ7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKFByb21pc2UucmVqZWN0KGVycm9yKSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY29tcGxldGVBbGJ1bTogZnVuY3Rpb24gY29tcGxldGVBbGJ1bSgpIHsKICAgIHRoaXMubWVzc2FnZSA9ICLnm7jnsL/lu7rnq4vlrozmiJDvvIzoq4vph43mlrDmm7TmlrDntrLpoIHliY3lvoDpoJDopr3jgIIiOwogIH0KfTs="},{"version":3,"sources":["C:\\www-server\\ntcust_lang_frontend\\src\\views\\components\\Manage-Album-Create.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <b-button v-b-toggle.collapse-2 variant=\"success m-2\">建立相簿</b-button>\r\n    <b-collapse id=\"collapse-2\" class=\"m-2\">\r\n        <b-card v-if=\"!message\">\r\n            <b-row class=\"my-2\">\r\n                <b-col md=\"2\">\r\n                    <label for=\"\">相簿名稱</label>\r\n                </b-col>\r\n                <b-col md=\"10\">\r\n                    <b-form-input v-model=\"albumName\" placeholder=\"請填入相簿名稱\"></b-form-input>\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-2\">\r\n                <b-col md=\"2\">\r\n                    <label for=\"\">相簿說明</label>\r\n                </b-col>\r\n                <b-col md=\"10\">\r\n                    <b-form-textarea\r\n                        id=\"textarea\"\r\n                        v-model=\"albumDescription\"\r\n                        placeholder=\"請填入相簿說明\"\r\n                        rows=\"5\"\r\n                        max-rows=\"5\"\r\n                        >\r\n                    </b-form-textarea>\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-2\">\r\n                <b-col md=\"2\">\r\n                    <label for=\"\">相簿內文</label>\r\n                </b-col>\r\n                <b-col md=\"10\">\r\n                    <b-form-textarea\r\n                        id=\"textarea\"\r\n                        v-model=\"albumContext\"\r\n                        placeholder=\"請填入相簿內文\"\r\n                        rows=\"5\"\r\n                        max-rows=\"5\"\r\n                        >\r\n                    </b-form-textarea>\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-2 text-center\">\r\n                <b-col md=\"12\">\r\n                    <b-button variant=\"success m-2\" \r\n                        @click=\"createData\" \r\n                        v-b-popover.hover.bottom=\"'下一步再上傳圖片'\" \r\n                        title=\"創建相簿\">\r\n                        下一步\r\n                    </b-button>\r\n                </b-col>\r\n            </b-row>\r\n        </b-card>\r\n        <!--  -->\r\n        <form id=\"form\" ref=\"form\" class=\"\" @submit.prevent=\"handleSubmit\">\r\n        <b-card v-if=\"message\">\r\n            <b-alert show variant=\"success\">{{ message }}</b-alert>\r\n            <b-row class=\"my-2\">\r\n                <b-col md=\"2\">\r\n                    <label for=\"\">新增圖片</label>\r\n                </b-col>\r\n                <b-col md=\"10\">\r\n                    <div class=\"min-h-screen flex items-center justify-center\">\r\n                        <img v-show=\"imageUrl\"\r\n                            :src=\"imageUrl\"\r\n                            class=\"w-48 h-48 object-cover\"\r\n                            width=\"200\">\r\n                        <div>\r\n                            <input type=\"file\"\r\n                                accept=\"image/*\"\r\n                                @change=\"handleImageSelected\">\r\n                        </div>\r\n                        <div class=\"flex flex-wrap mt-8\">\r\n                            <img v-for=\"(image, key) in images\"\r\n                                :key=\"key\"\r\n                                :src=\"image.image\"\r\n                                class=\"w-48 h-46 object-cover mr-4 mb-4 shadow rounded\">\r\n                        </div>\r\n                    </div>\r\n                </b-col>\r\n            </b-row>\r\n            <b-row class=\"my-2 text-center\">\r\n                <b-col md=\"12\">\r\n                    <b-button variant=\"success m-2\" \r\n                        type=\"submit\"\r\n                        v-b-popover.hover.bottom=\"'如果還需要上傳圖片，請先按此按鈕。'\" \r\n                        title=\"上傳圖片\">\r\n                        確認圖片\r\n                    </b-button>\r\n                    <b-button variant=\"primary m-2\" \r\n                        v-b-popover.hover.bottom=\"'如果無需要再上傳圖片，請按此按鈕。'\"\r\n                        @click=\"completeAlbum\" \r\n                        title=\"完成編輯\">\r\n                        建立完成\r\n                    </b-button>\r\n                </b-col>\r\n            </b-row>\r\n        </b-card>\r\n        </form>\r\n        <!--  -->\r\n    </b-collapse>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { useImageUpload } from './useImageUpload';\r\nimport { ref } from \"vue\";\r\n\r\nexport default {\r\n    name: \"Home\",\r\n    setup() {\r\n        let message = ref(\"\");\r\n        let images = ref([]);\r\n        let albumName = ref(\"\");\r\n        let albumDescription = ref(\"\");\r\n        let albumContext = ref(\"\");\r\n        let successID = ref(\"\");\r\n        let numPhoto = ref(\"\");\r\n            \r\n        let { imageFile, imageUrl, handleImageSelected } = useImageUpload();\r\n\r\n        function handleSubmit() {\r\n            let data = new FormData();\r\n            data.append(\"file\", imageFile.value);\r\n            data.append(\"type_id\", 5);\r\n            data.append(\"sheet_id\", this.successID);\r\n            axios({\r\n                method: 'post',\r\n                url: 'http://localhost/ntcust_lang_backend/public/api/file/create',\r\n                data: data,\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Accept\": \"application/json\",\r\n                    \"Authorization\": 'Bearer ' + localStorage.getItem('API_TOKEN'),\r\n                }\r\n            })\r\n            .then( () => {\r\n                this.numPhoto += 1;\r\n                this.message = \"圖片上傳圖片成功，目前共計\" + this.numPhoto + \"張圖片\";\r\n                // console.log(response.data);\r\n            })\r\n            .catch( (error) => {\r\n                console.log(Promise.reject(error));\r\n            });\r\n        }\r\n        return {\r\n            handleImageSelected,\r\n            imageUrl,\r\n            handleSubmit,\r\n            message,\r\n            images,\r\n            albumName,\r\n            albumDescription,\r\n            albumContext,\r\n            successID,\r\n            numPhoto\r\n        };\r\n    },\r\n    methods: {\r\n        createData()\r\n        {\r\n            axios({\r\n                method: 'post',\r\n                url: 'http://localhost/ntcust_lang_backend/public/api/album/create',\r\n                data: {\r\n                    name: this.albumName,\r\n                    description: this.albumDescription,\r\n                    context: this.albumContext\r\n                },\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Accept\": \"application/json\",\r\n                    \"Authorization\": 'Bearer ' + localStorage.getItem('API_TOKEN'),\r\n                }\r\n            })\r\n            .then( response => {\r\n                this.numPhoto = 0;\r\n                this.message = \"相簿新增成功，請上傳相片。\";\r\n                this.successID = response.data.data.id;\r\n            })\r\n            .catch( (error) => {\r\n                console.log(Promise.reject(error));\r\n            });\r\n        }\r\n    },\r\n    completeAlbum()\r\n    {\r\n        this.message = \"相簿建立完成，請重新更新網頁前往預覽。\";\r\n    }\r\n};\r\n</script>\r\n"],"sourceRoot":""}]}